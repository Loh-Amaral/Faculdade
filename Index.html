<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta e Controle de Figurinhas</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <h1>Consulta de Figurinha</h1>
    <label for="numerosConsulta">Insira os números das figurinhas (separados por vírgula):</label>
    <input type="text" id="numerosConsulta" required>
    <button onclick="consultarSequencia()">Consultar</button>

    <div class="resultado" id="resultado"></div>

    <h2>Adicionar Figurinha</h2>
    <label for="numeroAdicionar">Número da figurinha:</label>
    <input type="number" id="numeroAdicionar" required>
    <label for="quantidadeAdicionar">Quantidade:</label>
    <input type="number" id="quantidadeAdicionar" required>
    <label for="localAdicionar">Com quem está:</label>
    <input type="text" id="localAdicionar" required>
    <button onclick="adicionar()">Adicionar Figurinha</button>

    <h2>Baixar Figurinha</h2>
    <label for="numeroBaixar">Número da figurinha:</label>
    <input type="number" id="numeroBaixar" required>
    <label for="quantidadeBaixar">Quantidade a baixar:</label>
    <input type="number" id="quantidadeBaixar" required>
    <label for="unidadeBaixar">Unidade (CS, GS, NS, NK, NR, BS, Sede):</label>
    <input type="text" id="unidadeBaixar" required>
    <label for="nomeBaixar">Nome:</label>
    <input type="text" id="nomeBaixar" required>
    <button onclick="baixar()">Baixar Figurinha</button>

    <h2>Visualizar Retiradas</h2>
    <div id="historicoRetiradas" class="resultado"></div>

    <script>
        let bancoDados = JSON.parse(localStorage.getItem('bancoDados')) || [
            { numero: 88, quantidade: 1, comQuem: "MKT CS" },
            { numero: 90, quantidade: 3, comQuem: "MKT CS" },
            { numero: 46, quantidade: 2, comQuem: "MKT CS" },
            { numero: 43, quantidade: 1, comQuem: "MKT CS" },
            { numero: 44, quantidade: 1, comQuem: "MKT CS" },
            { numero: 45, quantidade: 2, comQuem: "MKT CS" },
            { numero: 124, quantidade: 1, comQuem: "MKT CS" },
            { numero: 122, quantidade: 1, comQuem: "MKT CS" },
            { numero: 120, quantidade: 1, comQuem: "MKT CS" },
            { numero: 19, quantidade: 4, comQuem: "MKT CS" },
            { numero: 16, quantidade: 6, comQuem: "MKT CS" },
            { numero: 97, quantidade: 10, comQuem: "MKT CS" },
            { numero: 111, quantidade: 2, comQuem: "MKT CS" },
            { numero: 103, quantidade: 2, comQuem: "MKT CS" },
            { numero: 95, quantidade: 2, comQuem: "MKT CS" },
            { numero: 104, quantidade: 2, comQuem: "MKT CS" },
            { numero: 7, quantidade: 5, comQuem: "MKT CS" },
            { numero: 40, quantidade: 4, comQuem: "MKT CS" },
            { numero: 86, quantidade: 8, comQuem: "MKT CS" },
            { numero: 112, quantidade: 2, comQuem: "MKT CS" },
            { numero: 113, quantidade: 2, comQuem: "MKT CS" },
            { numero: 18, quantidade: 2, comQuem: "MKT CS" },
            { numero: 70, quantidade: 3, comQuem: "MKT CS" },
            { numero: 115, quantidade: 2, comQuem: "MKT CS" },
            { numero: 24, quantidade: 2, comQuem: "MKT CS" },
            { numero: 23, quantidade: 2, comQuem: "MKT CS" },
            { numero: 56, quantidade: 2, comQuem: "MKT CS" },
            { numero: 94, quantidade: 2, comQuem: "MKT CS" },
            { numero: 75, quantidade: 1, comQuem: "MKT CS" },
            { numero: 20, quantidade: 1, comQuem: "MKT CS" },
            { numero: 118, quantidade: 1, comQuem: "MKT CS" },
            { numero: 85, quantidade: 1, comQuem: "MKT CS" },
            { numero: 83, quantidade: 1, comQuem: "MKT CS" },
            { numero: 50, quantidade: 1, comQuem: "MKT CS" },
            { numero: 65, quantidade: 1, comQuem: "MKT CS" },
        ];

        const historicoRetiradas = [];

        function adicionar() {
            const numero = parseInt(document.getElementById('numeroAdicionar').value);
            const quantidade = parseInt(document.getElementById('quantidadeAdicionar').value);
            const comQuem = document.getElementById('localAdicionar').value;

            bancoDados.push({ numero, quantidade, comQuem });
            localStorage.setItem('bancoDados', JSON.stringify(bancoDados));
            alert('Figurinha adicionada com sucesso!');
        }

        function baixar() {
            const numero = parseInt(document.getElementById('numeroBaixar').value);
            const quantidade = parseInt(document.getElementById('quantidadeBaixar').value);
            const unidade = document.getElementById('unidadeBaixar').value;
            const nome = document.getElementById('nomeBaixar').value;

            const figurinha = bancoDados.find(f => f.numero === numero);
            if (figurinha && figurinha.quantidade >= quantidade) {
                figurinha.quantidade -= quantidade;
                if (figurinha.quantidade === 0) {
                    alert('A figurinha ' + numero + ' não está mais disponível.');
                }
                historicoRetiradas.push({ numero, quantidade, unidade, nome, data: new Date().toLocaleString() });
                localStorage.setItem('bancoDados', JSON.stringify(bancoDados));
                alert('Figurinha baixada com sucesso!');
                visualizarRetiradas();
            } else {
                alert('Quantidade indisponível!');
            }
        }

        function visualizarRetiradas() {
            const historicoDiv = document.getElementById('historicoRetiradas');
            historicoDiv.innerHTML = '<h3>Histórico de Retiradas:</h3>';
            historicoRetiradas.forEach(retirada => {
                historicoDiv.innerHTML += `<p>Figurinha ${retirada.numero} - Quantidade: ${retirada.quantidade} - Unidade: ${retirada.unidade} - Nome: ${retirada.nome} - Data: ${retirada.data}</p>`;
            });
        }

        function consultarSequencia() {
            const numeros = document.getElementById('numerosConsulta').value.split(',').map(num => parseInt(num.trim()));
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.innerHTML = '<h3>Resultados da Consulta:</h3>';

            numeros.forEach(numero => {
                const figurinha = bancoDados.find(f => f.numero === numero);
                if (figurinha) {
                    if (figurinha.quantidade > 0) {
                        resultadoDiv.innerHTML += `<p>Figurinha ${figurinha.numero} - Quantidade: ${figurinha.quantidade} - Com quem está: ${figurinha.comQuem}</p>`;
                    } else {
                        resultadoDiv.innerHTML += `<p>Figurinha ${figurinha.numero} - Não tem disponível.</p>`;
                    }
                } else {
                    resultadoDiv.innerHTML += `<p>Figurinha ${numero} não encontrada.</p>`;
                }
            });
        }
    </script>

</body>
</html>

